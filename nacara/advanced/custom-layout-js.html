<html class="has-navbar-fixed-top" lang="en"><head><title>Nacara · With JavaScript</title><meta http-equiv="content-type" content="text/html; charset=UTF-8" charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="shortcut icon" href="/Nacara/favicon-180x180.png"/><link rel="stylesheet" type="text/css" href="/Nacara/style.css"/><script src="https://unpkg.com/scroll-into-view-if-needed@2.2.28/umd/scroll-into-view-if-needed.min.js"></script></head><body class="has-footer"><nav class="navbar is-fixed-top is-spaced"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://mangelmaxime.github.io/Nacara/">Nacara</a></div><div class="navbar-menu"><div class="navbar-start"><div class="navbar-item has-nacara-dropdown is-floating is-current-page" data-guid="63dc37fb-f11c-40b2-a102-b874c1fd5d77"><div class="nacara-dropdown-link">Docs</div><div class="nacara-dropdown is-floating"><a class="nacara-dropdown-item" href="/Nacara/nacara/introduction.html"><div><div><strong>Nacara</strong></div><div class="nacara-dropdown-item-description">Learn more about how Nacara works,and how to setup it in your project</div></div></a><hr class="navbar-divider"/><a class="nacara-dropdown-item" href="/Nacara/nacara-layout-standard/introduction.html"><div><div><strong>Nacara.Layout.Standard</strong></div><div class="nacara-dropdown-item-description">Default layout used by Nacara</div></div></a><hr class="navbar-divider"/><a class="nacara-dropdown-item" href="/Nacara/nacara-apigen/introduction.html"><div><div><strong>Nacara.ApiGen</strong></div><div class="nacara-dropdown-item-description">API documentation generator for Nacara</div></div></a></div></div><a class="navbar-item is-hidden-mobile" href="/Nacara/reference/Nacara.Core/index.html">API</a><div class="navbar-item has-nacara-dropdown is-floating is-hidden-mobile" data-guid="d682fe1b-0142-44df-8d36-0fc04d42effd"><div class="nacara-dropdown-link">Changelogs</div><div class="nacara-dropdown is-floating"><a class="nacara-dropdown-item" href="/Nacara/changelogs/nacara.html"><div>Nacara</div></a><a class="nacara-dropdown-item" href="/Nacara/changelogs/nacara-core.html"><div>Nacara.Core</div></a><a class="nacara-dropdown-item" href="/Nacara/changelogs/nacara-layout-standard.html"><div>Nacara.Standard.Layout</div></a><a class="nacara-dropdown-item" href="/Nacara/changelogs/nacara-apigen.html"><div>Nacara.ApiGen</div></a></div></div><a class="navbar-item is-hidden-mobile" href="https://gitter.im/fable-compiler/Fable">Support</a><a class="navbar-item is-hidden-mobile" href="https://www.patreon.com/MangelMaxime">Donate</a><div class="navbar-item navbar-burger-dots is-hidden-tablet"><svg height="4" stroke="none" viewBox="0 0 22 4" width="22"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9,0)"></circle><circle cx="2" cy="2" r="2" transform="translate(18,0)"></circle></svg></div></div><div class="navbar-end is-hidden-mobile"><a class="navbar-item" href="https://github.com/MangelMaxime/Nacara"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item" href="https://twitter.com/MangelMaxime"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a></div></div><div class="nacara-navbar-menu"><a class="nacara-navbar-menu-item" href="/Nacara/reference/Nacara.Core/index.html">API</a><div class="nacara-navbar-menu-dropdown"><div class="nacara-navbar-menu-dropdown-label">Changelogs</div><a class="nacara-navbar-menu-dropdown-link" href="/Nacara/changelogs/nacara.html"><span>Nacara</span></a><a class="nacara-navbar-menu-dropdown-link" href="/Nacara/changelogs/nacara-core.html"><span>Nacara.Core</span></a><a class="nacara-navbar-menu-dropdown-link" href="/Nacara/changelogs/nacara-layout-standard.html"><span>Nacara.Standard.Layout</span></a><a class="nacara-navbar-menu-dropdown-link" href="/Nacara/changelogs/nacara-apigen.html"><span>Nacara.ApiGen</span></a></div><a class="nacara-navbar-menu-item" href="https://gitter.im/fable-compiler/Fable">Support</a><a class="nacara-navbar-menu-item" href="https://www.patreon.com/MangelMaxime">Donate</a><a class="nacara-navbar-menu-item" href="https://github.com/MangelMaxime/Nacara">GitHub</a><a class="nacara-navbar-menu-item" href="https://twitter.com/MangelMaxime">Twitter</a></div></div></nav><div class="grey-overlay"></div><div class="nacara-content"><div class="container"><div class="mobile-menu"><nav class="breadcrumb"><ul><li><a class="menu-trigger"><span></span><span></span><span></span></a></li><li class="is-active"><a>Docs</a></li><li class="is-active"><a>Nacara</a></li><li class="is-active"><a>Custom Layouts</a></li><li class="is-active"><a>With JavaScript</a></li></ul></nav></div><div class="columns is-gapless is-mobile"><div class="column is-menu-column is-3-desktop is-hidden-touch"><div class="menu-container"><aside class="menu"><p class="menu-label">Overview</p><ul class="menu-list"><li><a class=" " href="/Nacara/nacara/introduction.html">Introduction</a></li><li><a class=" " href="/Nacara/nacara/configuration.html">Configuration</a></li><li><a class=" " href="/Nacara/nacara/cli-usage.html">Command line usage</a></li><li><a class=" " href="/Nacara/nacara/directory-structure.html">Directory structure</a></li><li><a class=" " href="/Nacara/nacara/partials.html">Partials</a></li></ul><p class="menu-label">Guides</p><ul class="menu-list"><li><a class=" " href="/Nacara/nacara/guides/create-a-page.html">Create a page</a></li><li><a class=" " href="/Nacara/nacara/guides/customize-the-style.html">Style your application</a></li><li><a class=" " href="/Nacara/nacara/guides/create-a-section.html">Create a Section</a></li><li><a class=" " href="/Nacara/nacara/guides/section-menu.html">Section menu</a></li><li><a class=" " href="/Nacara/nacara/guides/deploy-your-site.html">Deploy your site</a></li><li><a class=" " href="/Nacara/nacara/guides/literate-files.html">Literate files</a></li></ul><p class="menu-label">Custom Layouts</p><ul class="menu-list"><li><a class=" " href="/Nacara/nacara/advanced/layout-from-scratch.html">Overview</a></li><li><a class=" is-active" href="/Nacara/nacara/advanced/custom-layout-js.html">With JavaScript</a></li><li><ul class="table-of-content"><li data-toc-rank="2"><a href="#setup-babel-for-jsx-support" data-toc-element="true">Setup Babel for JSX support</a></li><li data-toc-rank="2"><a href="#blog-page-layout" data-toc-element="true">Blog page layout</a></li><li data-toc-rank="2"><a href="#blog-index" data-toc-element="true">Blog index</a></li><li data-toc-rank="2"><a href="#working-with-async-functions" data-toc-element="true">Working with async functions</a></li><li data-toc-rank="2"><a href="#minimal-layout-file" data-toc-element="true">Minimal layout file</a></li></ul></li><li><a class=" " href="/Nacara/nacara/advanced/custom-layout-fsharp.html">With FSharp</a></li></ul></aside></div></div><div class="column is-9-desktop is-full-touch"><section class="section"><div class="content"><header class="page-header"><div class="columns is-vcentered"><div class="column"><nav class="breadcrumb is-category-navigation is-hidden-touch"><ul><li class="is-active"><a>Docs</a></li><li class="is-active"><a>Nacara</a></li><li class="is-active"><a>Custom Layouts</a></li><li class="is-active"><a>With JavaScript</a></li></ul></nav></div><div class="column is-narrow"><a class="button is-hidden-touch is-ghost" target="_blank" href="https://github.com/MangelMaxime/Nacara/edit/master/docs/nacara/advanced/custom-layout-js.md">Edit</a></div></div><h1 class="title is-1">With JavaScript</h1></header><div><style class=grvsc-styles>.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter::before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty::after{content:' ';-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line::before{content:' ';position:absolute;width:100%}.grvsc-line-diff-add::before{background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del::before{background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}.atom-one-light{background-color:#fafafa;color:#383a42}.atom-one-light .mtki{font-style:italic}.atom-one-light .mtk1{color:#383a42}.atom-one-light .mtk5{color:#e45649}.atom-one-light .mtk10{color:#50a14f}.atom-one-light .mtk7{color:#a0a1a7}.atom-one-light .mtk14{color:#a626a4}.atom-one-light .mtk9{color:#4078f2}.atom-one-light .mtk8{color:#0184bc}.atom-one-light .mtk6{color:#986801}.atom-one-light .mtk4{color:#c18401}.atom-one-light .mtk15{color:#ca1243}.atom-one-light .grvsc-line-highlighted::before{background-color:var(--grvsc-line-highlighted-background-color,rgba(0,0,0,.05));box-shadow:inset var(--grvsc-line-highlighted-border-width,4px) 0 0 0 var(--grvsc-line-highlighted-border-color,rgba(0,0,0,.2))}</style><article class="message is-primary"><div class=message-header><p>Note</div><div class=message-body><div><p>Creating a layout via JavaScript is the quickest way to extend Nacara because you just need a <code>.js</code> or <code>.jsx</code> file.<p>However, for complex layout or creating a layout package, you should prefer F# because it will have all the types definition and helpers available for you via the nuget <code>Nacara.Core</code></div></div></article><h2 id=setup-babel-for-jsx-support>Setup Babel for JSX support<a href=#setup-babel-for-jsx-support aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><article class="message is-info"><div class=message-body><div><p>If you used the template to set up Nacara, you can skip this step and go to <a href=#blog-page-layout>Blog page layout</a></div></div></article><ul class=textual-steps><li><p>Create the file <code>babel.config.json</code><pre class="atom-one-light grvsc-container"data-index=0 data-language=json><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk1>{</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk5>"presets"</span><span class=mtk1>: [</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk10>"@babel/preset-react"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    ]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre><li><p>Install the Babel dependencies:<pre class="atom-one-light grvsc-container"data-index=1 data-language><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source>npm install --D @babel/preset-react</span></span></code></pre></ul><h2 id=blog-page-layout>Blog page layout<a href=#blog-page-layout aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><article class="message is-info"><div class=message-body><div><p>We are going to use JavaScript to write our layout but you can also write them using F#.<p>For the tutorial, it is easier to use JavaScript as you can use scripts file directly.</div></div></article><ul class=textual-steps><li><p>Create a file <code>layouts/blog-page.jsx</code> at the root of your repository<pre class="atom-one-light grvsc-container"data-index=2 data-language><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source>├── docs</span></span>
<span class=grvsc-line><span class=grvsc-source>├── docsrc</span></span>
<span class=grvsc-line><span class=grvsc-source>├── layouts</span></span>
<span class=grvsc-line><span class=grvsc-source>    └── blog-page.jsx</span></span>
<span class=grvsc-line><span class=grvsc-source>├── lightner</span></span>
<span class=grvsc-line><span class=grvsc-source>└── node_modules</span></span></code></pre><p>Add this to the file:<pre class="atom-one-light grvsc-container"data-index=3 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// We need to import React for JSX to works</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>import</span><span class=mtk1> </span><span class=mtk5>React</span><span class=mtk1> </span><span class=mtk14>from</span><span class=mtk1> </span><span class=mtk10>"react"</span><span class=mtk1>;</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// We can reuse existing layouts function</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Here, we want to re-use the minimal page which generates only the navbar for us</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>import</span><span class=mtk1> </span><span class=mtk5>*</span><span class=mtk1> as </span><span class=mtk5>PageMinimal</span><span class=mtk1> </span><span class=mtk14>from</span><span class=mtk1> </span><span class=mtk10>"nacara-layout-standard/dist/Page.Minimal.js"</span><span class=mtk1>;</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Main render function which glue the helpers together</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>render</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk14>async</span><span class=mtk1> (rendererContext, pageContext) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Render the blog content using our helpers</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>content</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk10>"Blog page"</span><span class=mtk1>;</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> PageMinimal.</span><span class=mtk9>render</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        rendererContext, </span><span class="mtk7 mtki">// Forward the rendererContext</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        pageContext.</span><span class=mtk5>Section</span><span class=mtk1>, </span><span class="mtk7 mtki">// Forward the pageContext</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        content </span><span class="mtk7 mtki">// Pass the blog content to render below the navbar</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    );</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Each layout needs to export this object</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>export</span><span class=mtk1> </span><span class=mtk5>default</span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// We can have several renderer, it is useful when publishing to npm</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk5>Renderers</span><span class=mtk8>:</span><span class=mtk1> [</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// Unique name of the layout used by Nacara to know how to render your page</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk5>Name</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk10>"blog-page"</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// render function</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk5>Func</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk5>render</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        }</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    ],</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// An array of external dependencies</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// For example, if your layouts need to include some external</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// JavaScript file you specify them here so Nacara know that it</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// has to copy them into the destination directory</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk5>Dependencies</span><span class=mtk8>:</span><span class=mtk1> []</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span></code></pre><article class="message is-info"><div class=message-body><div><p>You can learn more about the API by going to the API section.<p>The API is documented from F# but the properties available are the same in JavaScript.<p>Here are the most important topics when working with custom layouts:<ul><li><a href=/Nacara/reference/Nacara.Core/nacara-core-types-renderercontext.html>RendererContext</a> : Context accessible when rendering a page.<li><a href=/Nacara/reference/Nacara.Core/nacara-core-types-pagecontext.html>PageContext</a> : Represents the context of a page within Nacara.<li><a href=/Nacara/reference/Nacara.Core/nacara-core-types-layoutinfo.html>LayoutInfo</a> : Exposed contract of a layout.</ul></div></div></article><li><p>We need to decide what information are specific to a blog post and add them to the front matter.<p>A blog page has:<ul><li>an author<li>a title<li>a date</ul><p>We will add these information via the front-matter.<p>Update the front-matter of <code>docs/blog/2021/welcome.md</code> with<pre class="atom-one-light grvsc-container"data-index=4 data-language><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source>---</span></span>
<span class=grvsc-line><span class=grvsc-source>title: Welcome</span></span>
<span class=grvsc-line><span class=grvsc-source>layout: blog-page</span></span>
<span class=grvsc-line><span class=grvsc-source>author: Kira Nacara</span></span>
<span class=grvsc-line><span class=grvsc-source>date: 2021-08-20</span></span>
<span class=grvsc-line><span class=grvsc-source>---</span></span></code></pre><li><p>In the previous step we set the layout property to <code>blog-page</code>.<p>In order to avoid errors like:<blockquote><p>Layout renderer 'blog-page' is unknown</blockquote><p>We need to register our layout into our Nacara config.<p>Add <code>./layouts/blog-page.jsx</code> to the list of <code>layouts</code> in <code>nacara.config.js</code>.<p>You should have something like this:<pre class="atom-one-light grvsc-container"data-index=5 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>export</span><span class=mtk1> </span><span class=mtk5>default</span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// ...</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk10>"layouts"</span><span class=mtk8>:</span><span class=mtk1> [</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk10>"nacara-layout-standard"</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk10>"./layouts/blog-page.jsx"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    ]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre><li><p>Now we need to update our <code>blog-page.jsx</code> script to use the new information.<p>Replace your <code>render</code> function with this code:<article class="message is-info"><div class=message-body><div><p>We are adding a lot of code at once, take the time to read the comments</div></div></article><pre class="atom-one-light grvsc-container"data-index=6 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// This render a stylized title for our blog page</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>BlogTitle</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> ({ title }) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>h2</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"title is-size-3 has-text-primary has-text-weight-normal has-text-centered blog-title"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {title}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>h2</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// A helper function to render the author and date of our blog post</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>AuthorAndDate</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> ({ authorName, date }) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>dateFormat</span><span class=mtk1> </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>new</span><span class=mtk1> </span><span class=mtk10>Intl</span><span class=mtk1>.</span><span class=mtk4>DateTimeFormat</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk10>"en"</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                </span><span class=mtk5>dateStyle</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk10>"long"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            }</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        );</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"tags has-addons is-justify-content-center"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk5>span</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"tag is-rounded is-medium is-primary"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            {authorName}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &#60/</span><span class=mtk5>span</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk5>span</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"tag is-rounded is-medium"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            {dateFormat.</span><span class=mtk9>format</span><span class=mtk1>(date)}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &#60/</span><span class=mtk5>span</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// A helper function to render the blog container,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// it will makes our blog centered on the page on desktop</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>BlogContainer</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> ({ children }) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>section</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"section container"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"columns"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"column is-8-desktop is-offset-2-desktop"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                {children}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>section</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Main render function which glue the helpers together</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>render</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk14>async</span><span class=mtk1> (rendererContext, pageContext) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Access the front matter information</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>title</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> pageContext.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>title</span><span class=mtk1>;</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>author</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> pageContext.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>author</span><span class=mtk1>;</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>date</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> pageContext.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>date</span><span class=mtk1>;</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Transform the page content from Markdown to HTML</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>pageContent</span><span class=mtk1> </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>await</span><span class=mtk1> rendererContext.</span><span class=mtk9>MarkdownToHtml</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            pageContext.</span><span class=mtk5>Content</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            pageContext.</span><span class=mtk5>RelativePath</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        )</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Render the blog content using our helpers</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>content</span><span class=mtk1> </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk4>BlogContainer</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            &lt;</span><span class=mtk4>BlogTitle</span><span class=mtk1> </span><span class=mtk6>title</span><span class=mtk1>={title} /></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            &lt;</span><span class=mtk4>AuthorAndDate</span><span class=mtk1> </span><span class=mtk6>authorName</span><span class=mtk1>={author} </span><span class=mtk6>date</span><span class=mtk1>={date} /></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"content"</span><span class=mtk1> </span><span class=mtk6>dangerouslySetInnerHTML</span><span class=mtk1>={{ </span><span class=mtk5>__html</span><span class=mtk8>:</span><span class=mtk1> pageContent }} /></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &#60/</span><span class=mtk4>BlogContainer</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> PageMinimal.</span><span class=mtk9>render</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        rendererContext, </span><span class="mtk7 mtki">// Forward the rendererContext</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        pageContext.</span><span class=mtk5>Section</span><span class=mtk1>, </span><span class="mtk7 mtki">// Forward the pageContext</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        content </span><span class="mtk7 mtki">// Pass the blog content to render below the navbar</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    );</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre></ul><h2 id=blog-index>Blog index<a href=#blog-index aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><p>We are going to auto-generate the blog index page, so we can focus on writing our blog post instead of duplicating information.<ul class=textual-steps><li><p>Create a file <code>layouts/blog-index.jsx</code> at the root of your repository<pre class="atom-one-light grvsc-container"data-index=7 data-language><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source>├── docs</span></span>
<span class=grvsc-line><span class=grvsc-source>├── docsrc</span></span>
<span class=grvsc-line><span class=grvsc-source>├── layouts</span></span>
<span class=grvsc-line><span class=grvsc-source>    └── blog-page.jsx</span></span>
<span class=grvsc-line><span class=grvsc-source>    └── blog-index.jsx</span></span>
<span class=grvsc-line><span class=grvsc-source>├── lightner</span></span>
<span class=grvsc-line><span class=grvsc-source>└── node_modules</span></span></code></pre><p>Add this to the file:<pre class="atom-one-light grvsc-container"data-index=8 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Nacara is using React for generating the HTML</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>React</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk8>require</span><span class=mtk1>(</span><span class=mtk10>"react"</span><span class=mtk1>);</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// We can reuse existing layouts function</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Here, we want to re-use the minimal page which generates only the navbar for us</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>pageMinimal</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk8>require</span><span class=mtk1>(</span><span class=mtk10>"nacara-layout-standard/dist/Page.Minimal"</span><span class=mtk1>);</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>render</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk14>async</span><span class=mtk1> (rendererContext, pageContext) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> pageMinimal.</span><span class=mtk9>render</span><span class=mtk1>(</span><span class=mtk14>new</span><span class=mtk1> </span><span class=mtk10>pageMinimal</span><span class=mtk1>.</span><span class=mtk4>RenderArgs</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        rendererContext.</span><span class=mtk5>Config</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        pageContext.</span><span class=mtk5>Section</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk6>undefined</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk10>"Blog index"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    ));</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Each layout needs to export this object</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>export</span><span class=mtk1> </span><span class=mtk5>default</span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// We can have several renderer, it is useful when publishing to npm</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk5>Renderers</span><span class=mtk8>:</span><span class=mtk1> [</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// Unique name of the layout used by Nacara to know how to render your page</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk5>Name</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk10>"blog-index"</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// render function</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk5>Func</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk5>render</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        }</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    ],</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// An array of external dependencies</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// For example, if your layouts need to include some external</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// JavaScript file you specify them here so Nacara know that it</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// has to copy them into the destination directory</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk5>Dependencies</span><span class=mtk8>:</span><span class=mtk1> []</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre><li><p>Change the <code>docs/blog/index.md</code> content to<pre class="atom-one-light grvsc-container"data-index=9 data-language><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source>---</span></span>
<span class=grvsc-line><span class=grvsc-source>layout: blog-index</span></span>
<span class=grvsc-line><span class=grvsc-source>---</span></span></code></pre><p>As you can see, we are only specifying the layout to use because this page will be fully generated.<li><p>Now, we want to modify our render function to generate the index page.<p>To do that, we are going to:<ol><li>Retrieve the list of <code>blog-page</code><li>Sort the page per date<li>Extract the information we want from the page information, for example the title, date<li>Render the list of blog pages</ol><p>Replace the <code>render</code> function with this code:<pre class="atom-one-light grvsc-container"data-index=10 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// This render a stylized title for our blog page</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>PageTitle</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> ({title}) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>h2</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"title is-size-3 has-text-primary has-text-weight-normal has-text-centered blog-title"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {title}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>h2</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>BlogPost</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> ({blogPage, siteMetadata}) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>dateFormat</span><span class=mtk1> </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>new</span><span class=mtk1> </span><span class=mtk10>Intl</span><span class=mtk1>.</span><span class=mtk4>DateTimeFormat</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk10>"en"</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                </span><span class=mtk5>dateStyle</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk10>"short"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            }</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        );</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>dateStr</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> dateFormat.</span><span class=mtk9>format</span><span class=mtk1>(blogPage.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>date</span><span class=mtk1>);</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Add baseUrl + change file extension</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> internalLink </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        siteMetadata.</span><span class=mtk5>BaseUrl</span><span class=mtk1> </span><span class=mtk8>+</span><span class=mtk1> blogPage.</span><span class=mtk5>RelativePath</span><span class=mtk1>.</span><span class=mtk9>substring</span><span class=mtk1>(</span><span class=mtk6>0</span><span class=mtk1>, blogPage.</span><span class=mtk5>RelativePath</span><span class=mtk1>.</span><span class=mtk9>lastIndexOf</span><span class=mtk1>(</span><span class=mtk10>'.'</span><span class=mtk1>) </span><span class=mtk8>+</span><span class=mtk1> </span><span class=mtk6>1</span><span class=mtk1>) </span><span class=mtk8>+</span><span class=mtk1> </span><span class=mtk10>"html"</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Use / for the URL and not \ needed when generating the blog from Windows</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    internalLink </span><span class=mtk8>=</span><span class=mtk1> internalLink.</span><span class=mtk9>replace</span><span class=mtk1>(</span><span class=mtk8>/\\/</span><span class=mtk14>g</span><span class=mtk1>, </span><span class=mtk10>"/"</span><span class=mtk1>);</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>li</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk15>{</span><span class=mtk1>dateStr </span><span class=mtk8>+</span><span class=mtk1> </span><span class=mtk10>": "</span><span class=mtk15>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk5>a</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"is-underlined"</span><span class=mtk1> </span><span class=mtk6>href</span><span class=mtk1>={internalLink}></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            {blogPage.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>title</span><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &#60/</span><span class=mtk5>a</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        , by </span><span class=mtk15>{</span><span class=mtk1>blogPage.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>author</span><span class=mtk15>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>li</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// A helper function to render the blog container,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// it will makes our blog centered on the page on desktop</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>PageContainer</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> ({blogPages, siteMetadata}) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>section</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"section container"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"columns"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"column is-8-desktop is-offset-2-desktop"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>className</span><span class=mtk1>=</span><span class=mtk10>"content"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                    &lt;</span><span class=mtk4>PageTitle</span><span class=mtk1> </span><span class=mtk6>title</span><span class=mtk1>={</span><span class=mtk10>"Blog posts"</span><span class=mtk1>}/></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                    &lt;</span><span class=mtk5>ul</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                        {blogPages.</span><span class=mtk9>map</span><span class=mtk1>((blogPage, index) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                            </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk4>BlogPost</span><span class=mtk1> </span><span class=mtk6>key</span><span class=mtk1>={index} </span><span class=mtk6>blogPage</span><span class=mtk1>={blogPage} </span><span class=mtk6>siteMetadata</span><span class=mtk1>={siteMetadata}/></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                        })}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                    &#60/</span><span class=mtk5>ul</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>section</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>render</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk14>async</span><span class=mtk1> (rendererContext, pageContext) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>blogPages</span><span class=mtk1> </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// In the rendererContext we have access to all Pages of our website</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        rendererContext.</span><span class=mtk5>Pages</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// Filter out the blog-page files</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            .</span><span class=mtk9>filter</span><span class=mtk1>((pageContext) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                </span><span class=mtk14>return</span><span class=mtk1> pageContext.</span><span class=mtk5>Layout</span><span class=mtk1> </span><span class=mtk8>===</span><span class=mtk1> </span><span class=mtk10>"blog-page"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            })</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// Sort the blog-page files by date (newest first)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            .</span><span class=mtk9>sort</span><span class=mtk1>((pageContext1, pageContext2 ) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                </span><span class=mtk14>return</span><span class=mtk1> pageContext2.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>date</span><span class=mtk1> </span><span class=mtk8>-</span><span class=mtk1> pageContext1.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>date</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            });</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> PageMinimal.</span><span class=mtk9>render</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        rendererContext, </span><span class="mtk7 mtki">// Forward the rendererContext</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        pageContext.</span><span class=mtk5>Section</span><span class=mtk1>, </span><span class="mtk7 mtki">// Forward the pageContext</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk4>PageContainer</span><span class=mtk1> </span><span class=mtk6>blogPages</span><span class=mtk1>={blogPages} </span><span class=mtk6>siteMetadata</span><span class=mtk1>={rendererContext.</span><span class=mtk5>Config</span><span class=mtk1>.</span><span class=mtk5>SiteMetadata</span><span class=mtk1>}/></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    );</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre></ul><h2 id=working-with-async-functions>Working with async functions<a href=#working-with-async-functions aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><p>Because, the markdown parser use an <code>async</code> function it can happen that you end up with this scenario.<pre class="atom-one-light grvsc-container"data-index=11 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>Abstract</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk14>async</span><span class=mtk1> ({rendererContext, blogPage}) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>abstractText</span><span class=mtk1> </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>await</span><span class=mtk1> rendererContext.</span><span class=mtk9>MarkdownToHtml</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            blogPage.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>abstract</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            pageContext.</span><span class=mtk5>RelativePath</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        );</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>class</span><span class=mtk1>=</span><span class=mtk10>"abstract"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {abstractText}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre><p>Unfortunately, this is not a valid JSX code.<p>The cleanest way to deal with this case is to pre-process the markdown code directly into the main <code>render</code> function.<pre class="atom-one-light grvsc-container"data-index=12 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>render</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk14>async</span><span class=mtk1> (rendererContext, pageContext) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> blogPages </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        rendererContext.</span><span class=mtk5>Pages</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">//...</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// Pre-process the blog-page files here, so we can use standard JSX afterwards</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>for</span><span class=mtk1> (</span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>blogPage</span><span class=mtk1> </span><span class=mtk14>of</span><span class=mtk1> blogPages) {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk6>abstractText</span><span class=mtk1> </span><span class=mtk8>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk14>await</span><span class=mtk1> rendererContext.</span><span class=mtk9>MarkdownToHtml</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                blogPage.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>abstract</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>                blogPage.</span><span class=mtk5>RelativePath</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            );</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class="mtk7 mtki">// Store the text representation into the blogPage information</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        blogPage.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>abstractText</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> abstractText;</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    }</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> pageMinimal.</span><span class=mtk9>render</span><span class=mtk1>(</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        rendererContext,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        pageContext,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        &lt;</span><span class=mtk4>PageContainer</span><span class=mtk1> </span><span class=mtk6>blogPages</span><span class=mtk1>={blogPages} /></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    ));</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>Abstract</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> ({rendererContext, blogPage}) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>div</span><span class=mtk1> </span><span class=mtk6>class</span><span class=mtk1>=</span><span class=mtk10>"abstract"</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {</span><span class="mtk7 mtki">/* Use the pre-processed text */</span><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {blogPage.</span><span class=mtk5>Attributes</span><span class=mtk1>.</span><span class=mtk5>abstractText</span><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    &#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre><h2 id=minimal-layout-file>Minimal layout file<a href=#minimal-layout-file aria-hidden=true tabindex=-1><span class=anchor>#</span></a></h2><p>If you want to write your own layout, here is a minimal file to start from.<pre class="atom-one-light grvsc-container"data-index=13 data-language=js><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// We need to import React for JSX to works</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>import</span><span class=mtk1> </span><span class=mtk5>React</span><span class=mtk1> </span><span class=mtk14>from</span><span class=mtk1> </span><span class=mtk10>"react"</span><span class=mtk1>;</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">// Your render function, this is where you will write all of your code</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>const</span><span class=mtk1> </span><span class=mtk9>render</span><span class=mtk1> </span><span class=mtk8>=</span><span class=mtk1> </span><span class=mtk14>async</span><span class=mtk1> (rendererContext, pageContext) </span><span class=mtk14>=></span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>return</span><span class=mtk1> &lt;</span><span class=mtk5>div</span><span class=mtk1>>Hello, this page use my own layout&#60/</span><span class=mtk5>div</span><span class=mtk1>></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>export</span><span class=mtk1> </span><span class=mtk5>default</span><span class=mtk1> {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// List of the renderers</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// For now, we will have only one renderer</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk5>Renderers</span><span class=mtk8>:</span><span class=mtk1> [</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        {</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// Name of your layout, this is what you write in the front-matter</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// Example:</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// ---</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// layout: my-layout</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class="mtk7 mtki">// ---</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk5>Name</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk10>"my-layout"</span><span class=mtk1>,</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            </span><span class=mtk5>Func</span><span class=mtk8>:</span><span class=mtk1> </span><span class=mtk5>render</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        }</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    ],</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// List of the static file to copy into the build directory</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class="mtk7 mtki">// For example, if your layout need a `menu.js`</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk5>Dependencies</span><span class=mtk8>:</span><span class=mtk1> []</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>}</span></span></span></code></pre></div></div></section><div class="section bd-docs-pagination bd-pagination-links"><a class="button bd-fat-button is-primary is-light bd-pagination-prev" href="/Nacara/nacara/advanced/layout-from-scratch.html"><i>←</i><span class="is-hidden-mobile"><em>Custom Layouts</em><strong>Overview</strong></span></a><a class="button bd-fat-button is-primary is-light bd-pagination-next" href="/Nacara/nacara/advanced/custom-layout-fsharp.html"><span class="is-hidden-mobile"><em>Custom Layouts</em><strong>With FSharp</strong></span><i>→</i></a></div></div></div></div></div><script async="" src="/Nacara/resources/nacara-standard-layouts/scripts/menu.js"></script><footer class="footer"><div class="content has-text-centered is-size-5"><p>The content of this website is copyright © 2021-<span id="copyright-end-year"></span><br/>under the terms of the <a class="is-underlined" href="https://github.com/MangelMaxime/Nacara/blob/master/LICENSE.txt" style="color:white">MIT License</a></p><script>
        const year = new Date().getFullYear();
        document.getElementById('copyright-end-year').innerHTML = year;
        </script></div></footer></body></html>